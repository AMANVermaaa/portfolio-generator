import{a as v}from"./chunk-34ETSI7S.js";import{I as p,N as m,Nb as i,Ob as h,Q as u,V as c,o as l,r as s,z as a}from"./chunk-7WOOTBBD.js";var w=(()=>{class n{constructor(o,e){this.http=o,this.authService=e,this.apiUrl="http://localhost:8080/api",this.defaultAvatar="assets/default-avatar.png",this.defaultProjectImage="assets/default-project.png",this.retryCount=2}getResumeById(o){return this.http.get(`${this.apiUrl}/upload/resume-details/${o}`).pipe(p(this.retryCount),m(e=>console.log("Raw response from backend:",e)),s(e=>this.transformResumeData(e)),a(e=>(console.error("Error in getResumeById HTTP call:",e),l(()=>e))))}uploadResume(o){let e=new FormData;e.append("file",o);let r=this.authService.getToken(),t=r?new i({Authorization:`Bearer ${r}`}):new i;return this.http.post(`${this.apiUrl}/upload/resume`,e,{headers:t,reportProgress:!0,observe:"events"}).pipe(a(this.handleError))}parseResume(o){let e=this.authService.getToken(),r=e?new i({Authorization:`Bearer ${e}`}):new i;return this.http.post(`${this.apiUrl}/upload/parse`,{},{headers:r,params:{fileName:o}}).pipe(s(t=>this.transformResumeData(t.parsedData)),a(this.handleError))}uploadAndParseResume(o){let e=new FormData;e.append("file",o);let r=this.authService.getToken(),t=r?new i({Authorization:`Bearer ${r}`}):new i;return this.http.post(`${this.apiUrl}/upload/upload-and-parse`,e,{headers:t}).pipe(s(d=>this.transformResumeData(d.parsedData,d)),a(this.handleError))}transformResumeData(o,e){let r=this.defaultAvatar;return o.avatarUrl?r=o.avatarUrl:e&&e.profileImage&&(r=e.profileImage),{id:o.id||"",name:o.name||"",title:o.title||"",email:o.email||"",phone:o.phone||"",address:o.address||"",summary:o.summary||"",about:o.about||"",avatarUrl:r,linkedIn:o.linkedin||o.linkedIn||"",github:o.github||"",portfolio:o.portfolio||"",skills:this.transformSkills(o.skills||[]),experiences:this.transformExperiences(o.experience||[]),educations:this.transformEducation(o.education||[]),projects:this.transformProjects(o.projects||[]),testimonials:o.testimonials||[]}}transformSkills(o){return o.map(e=>({name:e.name||"Unknown Skill",category:e.category||"Other",proficiency:e.proficiency||50,iconClass:this.getSkillIcon(e.name)}))}transformExperiences(o){return o.map(e=>({company:e.company||"Unknown Company",position:e.position||"Position Not Specified",startDate:e.startDate||"",endDate:e.current?"Present":e.endDate||"",current:e.current||!1,description:e.description||"",achievements:e.achievements||[]}))}transformEducation(o){return o.map(e=>({institution:e.institution||"",degree:e.degree||"",fieldOfStudy:e.fieldOfStudy||"",startDate:e.startDate||"",endDate:e.endDate||"",grade:e.grade||""}))}transformProjects(o){return o.map(e=>({title:e.title||"Untitled Project",description:e.description||"",technologies:e.technologies||[],imageUrl:e.imageUrl||this.defaultProjectImage,projectUrl:e.projectUrl||"",showTech:!1}))}handleError(o){let e="An unknown error occurred!";return o.error instanceof ErrorEvent?e=`Error: ${o.error.message}`:(e=`Error Code: ${o.status}
Message: ${o.message}`,o.error?.message&&(e+=`
Details: ${o.error.message}`)),console.error(e),l(()=>new Error(e))}getSkillIcon(o){if(!o)return"devicon-code-plain";let e={angular:"devicon-angularjs-plain colored",react:"devicon-react-original colored",vue:"devicon-vuejs-plain colored",svelte:"devicon-svelte-plain colored",javascript:"devicon-javascript-plain colored",typescript:"devicon-typescript-plain colored",html:"devicon-html5-plain colored",css:"devicon-css3-plain colored",bootstrap:"devicon-bootstrap-plain colored",tailwind:"devicon-tailwindcss-plain colored",nodejs:"devicon-nodejs-plain colored",express:"devicon-express-original colored",nestjs:"devicon-nestjs-plain colored",java:"devicon-java-plain colored",spring:"devicon-spring-plain colored",python:"devicon-python-plain colored",django:"devicon-django-plain colored",flask:"devicon-flask-original colored",php:"devicon-php-plain colored",laravel:"devicon-laravel-plain colored",ruby:"devicon-ruby-plain colored",rails:"devicon-rails-plain colored",c:"devicon-c-plain colored","c++":"devicon-cplusplus-plain colored",csharp:"devicon-csharp-plain colored",go:"devicon-go-original colored",rust:"devicon-rust-plain colored",mysql:"devicon-mysql-plain colored",postgresql:"devicon-postgresql-plain colored",mongodb:"devicon-mongodb-plain colored",redis:"devicon-redis-plain colored",sqlite:"devicon-sqlite-plain colored",git:"devicon-git-plain colored",github:"devicon-github-original colored",gitlab:"devicon-gitlab-plain colored",docker:"devicon-docker-plain colored",kubernetes:"devicon-kubernetes-plain colored",jenkins:"devicon-jenkins-plain colored",aws:"devicon-amazonwebservices-plain colored",azure:"devicon-azure-plain colored",gcp:"devicon-googlecloud-plain colored",linux:"devicon-linux-plain colored",bash:"devicon-bash-plain colored",webpack:"devicon-webpack-plain colored",babel:"devicon-babel-plain colored",npm:"devicon-npm-original-wordmark colored",yarn:"devicon-yarn-plain colored",figma:"devicon-figma-plain colored",photoshop:"devicon-photoshop-plain colored",xd:"devicon-xd-plain colored",default:"devicon-code-plain"},r=o.toLowerCase().trim().split(" ")[0];return e[r]||"devicon-code-plain"}static{this.\u0275fac=function(e){return new(e||n)(c(h),c(v))}}static{this.\u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{w as a};
